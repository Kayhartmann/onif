#!/usr/bin/with-contenv bashio
# ==============================================================================
# Service finish: onvif-server
# Called when onvif-server exits. s6 will restart automatically.
# ==============================================================================

EXIT_CODE="${1}"
SIGNAL="${2}"

bashio::log.warning "ONVIF server exited with code ${EXIT_CODE} (signal: ${SIGNAL})"

if [ "${EXIT_CODE}" -eq 256 ]; then
    bashio::log.info "ONVIF server stopped intentionally."
    exit 0
fi

bashio::log.info "ONVIF server will be restarted by s6-supervise..."
exit 0
